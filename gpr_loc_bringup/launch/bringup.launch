<?xml version="1.0" encoding="UTF-8"?>
<launch>
    <arg name="gui" default="true" />
    <arg name="gpu" default="false" />
    <arg name="x_pos" default="0" />
    <arg name="y_pos" default="0" />
    <arg name="yaw" default="0" />

    <include file="$(find gpr_loc_bringup)launch/training_world.launch">
        <arg name="gui" value="$(arg gui)" />
        <arg name="gpu" value="$(arg gpu)" />
        <arg name="use_sim_time" value="true" /> <!-- um timing probleme zu vermeiden -->
        <arg name="paused" value="false" />
        <arg name="x_pos" value="$(arg x_pos)" />
        <arg name="y_pos" value="$(arg y_pos)" />
        <arg name="yaw" value="$(arg yaw)" />
    </include>

    <!-- Start Controller -->
    <include file="$(find taurob_tracker_control)/launch/taurob_tracker_control.launch" />
    <!-- Start Rviz -->
    <node name="rviz" pkg="rviz" type="rviz" args="-d $(find gpr_loc_bringup)/config/gpr_loc_training.rviz" />

    <!-- remap the linear_controller topics to the EKF and Controller-Node Topics-->
    <remap from="/linear_controller/odom" to="/odom" />
    <remap from="/linear_controller/cmd_vel" to="/taurob_tracker/cmd_vel_raw" />
    <!-- start the linear controller -->
    <node pkg="linear_controller" type="linear_controller_ctrl_node" name="linear_controller">
        <rosparam file="$(find gpr_loc_bringup)/config/controller_parameters.yaml" />
        <rosparam file="$(find gpr_loc_bringup)/config/trajectory_ccw.yaml" />
    </node>


    <node pkg="tf2_ros" type="static_transform_publisher" name="realsense_depth" args="0 0 0 -1.57 0 -1.57 /realsense_rgbd_link /realsense_rgbd_depth_optical_frame" />

</launch>